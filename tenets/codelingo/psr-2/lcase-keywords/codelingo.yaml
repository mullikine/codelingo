funcs:
  - name: isSpecialButNotLCase
    type: asserter
    body: |
      function (s) {
        function isLCase(s) {
          return s === s.toLowerCase()
        }
        function isSpecial(s) {
          return s !== s.toLowerCase()
        }
        return isSpecial(s) && ! isLCase(s)
      }
  - name: lc
    type: resolver
    body: |
      function (s) {
        return s.toLowerCase()
      }
tenets:
  - name: lcase-keywords
    vars:
      pName: "{{ protoName(literalValue) }}"
    flows:
      codelingo/rewrite:
      codelingo/docs:
        title: Lower-case Keywords and Constants
        body: |
          PHP keywords MUST be in lower case.
          
          The PHP constants true, false, and null MUST be in lower case.
      codelingo/review:
        comment: \`{{identName}}` is a {{keywordOrConstant}} so it should be lowercase.
    query: |
      import codelingo/ast/php

      php.stmt_function(depth = any):
        @review comment
        @rewrite --replace "{{lc(identName)}}"
        php.param:
          type == "bool"
          name as identName
          isSpecialButNotLCase(identName)