funcs:
  - name: isNotUCase
    type: asserter
    body: |
      function (s) {
        function uc(s) {
          return s.toUpperCase();
        }

        return s !== uc(s)
      }
  - name: uc
    type: resolver
    body: |
      function (s) {
        return s.toUpperCase()
      }
tenets:
  - name: uppercase-class-constants
    flows:
      codelingo/rewrite:
      codelingo/docs:
        title: Uppercase Class Constants
        body: |
          PHP class constants MUST be in uppercase.
      codelingo/review:
        comment: \`{{identName}}` is a class constant so it should be uppercase.
    query: |
      import codelingo/ast/php

      path(repeat = 1):
        any_of:
          php.stmt_classconst(depth = any):
            php.const:
              pathcontinue
          php.expr_classconstfetch(depth = any):
            pathcontinue
        pathend:
          @review comment
          @rewrite --replace "{{uc(identName)}}"
          php.identifier:
            child_count == "0"
            name as identName
            isNotUCase(identName)